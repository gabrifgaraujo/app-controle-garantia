import{u as L,r as c,j as e}from"./index-CfWhTiSJ.js";import{c as x,M as F,U as _,X as z,S as k}from"./sweetalert2.esm.all-_ZrYOr3T.js";const $=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],T=x("building-2",$);const V=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],B=x("camera",V);const H=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],R=x("lock",H);const U=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],K=x("save",U);function G(){const A=L(),[r,j]=c.useState(!1),[w,C]=c.useState(!1),[I,N]=c.useState(!1),[l,v]=c.useState({nome:"",email:"",cpf:"",telefone:"",empresa:"",cnpj:"",endereco:"",avatar:null}),[s,h]=c.useState({...l}),[n,u]=c.useState({}),[p,g]=c.useState(""),[m,S]=c.useState(""),[b,y]=c.useState("");c.useEffect(()=>{const a=localStorage.getItem("usuarioLogado");if(a){const t=JSON.parse(a);v(t),h(t)}},[]);const f=a=>{const{name:t,value:i}=a.target;h(o=>({...o,[t]:i}))},D=a=>{const t=a.target.files?.[0];if(!t)return;const i=new FileReader;i.onloadend=()=>{const o=i.result;typeof o=="string"&&h(d=>({...d,avatar:o}))},i.readAsDataURL(t)},E=()=>{const a={};return s.nome.trim()||(a.nome="Nome é obrigatório."),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="Email inválido."):a.email="Email é obrigatório.",s.telefone.trim()?/^\d{10,11}$/.test(s.telefone.replace(/\D/g,""))||(a.telefone="Telefone deve ter 10 ou 11 dígitos."):a.telefone="Telefone é obrigatório.",s.cpf.trim()?/^\d{11}$/.test(s.cpf.replace(/\D/g,""))||(a.cpf="CPF deve ter 11 dígitos."):a.cpf="CPF é obrigatório.",s.cnpj&&s.cnpj.trim()&&!/^\d{14}$/.test(s.cnpj.replace(/\D/g,""))&&(a.cnpj="CNPJ deve ter 14 dígitos."),u(a),Object.keys(a).length===0},M=()=>{if(!E())return;v(s),localStorage.setItem("usuarioLogado",JSON.stringify(s));const a=JSON.parse(localStorage.getItem("usuarios")||"[]"),t=a.findIndex(o=>o.email===l.email);t!==-1&&(a[t]={...a[t],...s},localStorage.setItem("usuarios",JSON.stringify(a))),j(!1);const i=document.body.classList.contains("dark");k.fire({icon:"success",title:"Perfil atualizado!",confirmButtonText:"OK",background:i?"#141414":"#ffffff",color:i?"#e5e7eb":"#1f2937",confirmButtonColor:"#7c3aed"})},P=()=>{h({...l}),u({}),j(!1)},O=()=>{const a=l.email,i=JSON.parse(localStorage.getItem("usuarios")||"[]").filter(d=>d.email!==a);localStorage.setItem("usuarios",JSON.stringify(i));const o=`notas_${a}`;localStorage.removeItem(o),localStorage.removeItem("usuarioLogado"),A("/")},J=()=>{const a={};if(p?p!==l.senha&&(a.senhaAtual="Senha atual incorreta."):a.senhaAtual="Senha atual é obrigatória.",m?m.length<9?a.novaSenha="A senha deve ter no mínimo 9 caracteres.":m===p&&(a.novaSenha="A nova senha não pode ser igual à senha atual."):a.novaSenha="Nova senha é obrigatória.",b?m!==b&&(a.confirmarSenha="As senhas não coincidem."):a.confirmarSenha="Confirmação de senha é obrigatória.",u(a),Object.keys(a).length===0){const t=JSON.parse(localStorage.getItem("usuarios")||"[]"),i=t.findIndex(d=>d.email===l.email);if(i!==-1){t[i].senha=m,localStorage.setItem("usuarios",JSON.stringify(t));const d={...l,senha:m};v(d),localStorage.setItem("usuarioLogado",JSON.stringify(d))}N(!1),g(""),S(""),y("");const o=document.body.classList.contains("dark");k.fire({icon:"success",title:"Senha alterada com sucesso!",confirmButtonText:"OK",background:o?"#141414":"#ffffff",color:o?"#e5e7eb":"#1f2937",confirmButtonColor:"#7c3aed"})}};return e.jsxs(F,{currentPage:"Perfil",nome:l.nome,email:l.email,avatar:l.avatar,children:[e.jsx("div",{className:"profile-container",children:e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs("div",{className:"profile-avatar-section",children:[e.jsx("div",{className:"profile-avatar",children:s.avatar?e.jsx("img",{src:s.avatar,alt:"Avatar",className:"avatar-image"}):l.nome.split(" ").map(a=>a[0]).join("").slice(0,2)}),r&&e.jsxs("label",{className:"camera-button",children:[e.jsx(B,{className:"camera-icon"}),e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"file-input"})]})]}),e.jsx("div",{className:"profile-main-info",children:r?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"nome",value:s.nome,onChange:f,className:"edit-name-input"}),n.nome&&e.jsx("p",{className:"error-text",children:n.nome})]}):e.jsx("h1",{className:"profile-name",children:l.nome})})]}),e.jsxs("div",{className:"profile-details",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(_,{className:"section-icon"}),"Informações Pessoais"]}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-field",children:[e.jsxs("label",{className:"field-label",children:["Email ",e.jsx("span",{className:"error-text",children:"*"})]}),r?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"email",name:"email",value:s.email,onChange:f,className:"field-input"}),n.email&&e.jsx("p",{className:"error-text",children:n.email})]}):e.jsx("p",{className:"field-value",children:l.email})]}),e.jsxs("div",{className:"info-field",children:[e.jsxs("label",{className:"field-label",children:["CPF ",e.jsx("span",{className:"error-text",children:"*"})]}),r?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"cpf",value:s.cpf,onChange:f,className:"field-input"}),n.cpf&&e.jsx("p",{className:"error-text",children:n.cpf})]}):e.jsx("p",{className:"field-value",children:l.cpf})]}),e.jsxs("div",{className:"info-field",children:[e.jsxs("label",{className:"field-label",children:["Telefone ",e.jsx("span",{className:"error-text",children:"*"})]}),r?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"tel",name:"telefone",value:s.telefone,onChange:f,className:"field-input"}),n.telefone&&e.jsx("p",{className:"error-text",children:n.telefone})]}):e.jsx("p",{className:"field-value",children:l.telefone})]})]}),e.jsxs("h2",{className:"section-title section-title-spacing",children:[e.jsx(T,{className:"section-icon"}),"Informações Opcionais"]}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label-simple",children:"Empresa"}),r?e.jsx("input",{type:"text",name:"empresa",value:s.empresa,onChange:f,className:"field-input"}):e.jsx("p",{className:"field-value",children:l.empresa||"-"})]}),e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label-simple",children:"CNPJ"}),r?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"cnpj",value:s.cnpj,onChange:f,className:"field-input"}),n.cnpj&&e.jsx("p",{className:"error-text",children:n.cnpj})]}):e.jsx("p",{className:"field-value",children:l.cnpj||"-"})]}),e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label",children:"Endereço"}),r?e.jsx("input",{type:"text",name:"endereco",value:s.endereco,onChange:f,className:"field-input"}):e.jsx("p",{className:"field-value",children:l.endereco||"-"})]})]}),r&&e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{onClick:P,className:"cancel-button",children:[e.jsx(z,{className:"button-icon"}),"Cancelar"]}),e.jsxs("button",{onClick:M,className:"save-button",children:[e.jsx(K,{className:"button-icon"}),"Salvar Alterações"]})]}),!r&&e.jsxs("div",{className:"profile-header-buttons",children:[e.jsx("button",{onClick:()=>j(!0),className:"edit-button",children:"Editar Perfil"}),e.jsxs("button",{onClick:()=>N(!0),className:"change-password-button",children:[e.jsx(R,{size:18}),"Alterar Senha"]}),e.jsx("button",{onClick:()=>C(!0),className:"delete-account-button",children:"Deletar Conta"})]})]})]})}),I&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal password-modal",children:[e.jsx("h3",{className:"modal-title",children:"Alterar Senha"}),e.jsxs("div",{className:"password-fields",children:[e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label",children:"Senha Atual"}),e.jsx("input",{type:"password",value:p,onChange:a=>g(a.target.value),className:"field-input"}),n.senhaAtual&&e.jsx("p",{className:"error-text",children:n.senhaAtual})]}),e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label",children:"Nova Senha"}),e.jsx("input",{type:"password",value:m,onChange:a=>S(a.target.value),className:"field-input"}),n.novaSenha&&e.jsx("p",{className:"error-text",children:n.novaSenha})]}),e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label",children:"Confirmar Nova Senha"}),e.jsx("input",{type:"password",value:b,onChange:a=>y(a.target.value),className:"field-input"}),n.confirmarSenha&&e.jsx("p",{className:"error-text",children:n.confirmarSenha})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>{N(!1),g(""),S(""),y(""),u({})},className:"modal-cancel",children:"Cancelar"}),e.jsx("button",{onClick:J,className:"modal-confirm",children:"Alterar Senha"})]})]})}),w&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal danger",children:[e.jsx("h3",{className:"modal-title",children:"Deletar conta"}),e.jsxs("p",{className:"modal-text",children:["Tem certeza que deseja deletar sua conta?",e.jsx("br",{}),e.jsx("strong",{children:"Essa ação não pode ser desfeita."})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>C(!1),className:"modal-cancel",children:"Cancelar"}),e.jsx("button",{onClick:O,className:"modal-confirm danger",children:"Deletar"})]})]})})]})}export{G as default};
