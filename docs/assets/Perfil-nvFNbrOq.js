import{u as k,r as d,j as e}from"./index-OKyS6CUG.js";import{c as p,M as E,U as D,X as I}from"./MenuLateral-5eTgk6GH.js";const M=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],P=p("building-2",M);const F=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],A=p("camera",F);const J=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],O=p("save",J);function $(){const N=k(),[i,f]=d.useState(!1),[v,h]=d.useState(!1),[l,x]=d.useState({nome:"",email:"",cpf:"",telefone:"",empresa:"",cnpj:"",endereco:"",avatar:null}),[s,m]=d.useState({...l}),[n,j]=d.useState({});d.useEffect(()=>{const a=localStorage.getItem("usuarioLogado");if(a){const t=JSON.parse(a);x(t),m(t)}},[]);const r=a=>{const{name:t,value:c}=a.target;m(o=>({...o,[t]:c}))},g=a=>{const t=a.target.files?.[0];if(!t)return;const c=new FileReader;c.onloadend=()=>{const o=c.result;typeof o=="string"&&m(u=>({...u,avatar:o}))},c.readAsDataURL(t)},b=()=>{const a={};return s.nome.trim()||(a.nome="Nome é obrigatório."),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="Email inválido."):a.email="Email é obrigatório.",s.telefone.trim()?/^\d{10,11}$/.test(s.telefone.replace(/\D/g,""))||(a.telefone="Telefone deve ter 10 ou 11 dígitos."):a.telefone="Telefone é obrigatório.",s.cpf.trim()?/^\d{11}$/.test(s.cpf.replace(/\D/g,""))||(a.cpf="CPF deve ter 11 dígitos."):a.cpf="CPF é obrigatório.",s.cnpj&&s.cnpj.trim()&&!/^\d{14}$/.test(s.cnpj.replace(/\D/g,""))&&(a.cnpj="CNPJ deve ter 14 dígitos."),j(a),Object.keys(a).length===0},y=()=>{if(!b())return;x(s),localStorage.setItem("usuarioLogado",JSON.stringify(s));const a=JSON.parse(localStorage.getItem("usuarios")||"[]"),t=a.findIndex(c=>c.email===l.email);t!==-1&&(a[t]={...a[t],...s},localStorage.setItem("usuarios",JSON.stringify(a))),f(!1)},C=()=>{m({...l}),j({}),f(!1)},S=()=>{const a=l.email,c=JSON.parse(localStorage.getItem("usuarios")||"[]").filter(u=>u.email!==a);localStorage.setItem("usuarios",JSON.stringify(c));const o=`notas_${a}`;localStorage.removeItem(o),localStorage.removeItem("usuarioLogado"),N("/")};return e.jsxs(E,{currentPage:"Perfil",nome:l.nome,email:l.email,avatar:l.avatar,children:[e.jsx("div",{className:"profile-container",children:e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs("div",{className:"profile-avatar-section",children:[e.jsx("div",{className:"profile-avatar",children:s.avatar?e.jsx("img",{src:s.avatar,alt:"Avatar",className:"avatar-image"}):l.nome.split(" ").map(a=>a[0]).join("").slice(0,2)}),i&&e.jsxs("label",{className:"camera-button",children:[e.jsx(A,{className:"camera-icon"}),e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"file-input"})]})]}),e.jsx("div",{className:"profile-main-info",children:i?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"nome",value:s.nome,onChange:r,className:"edit-name-input"}),n.nome&&e.jsx("p",{className:"error-text",children:n.nome})]}):e.jsx("h1",{className:"profile-name",children:l.nome})})]}),e.jsxs("div",{className:"profile-details",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(D,{className:"section-icon"}),"Informações Pessoais"]}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-field",children:[e.jsxs("label",{className:"field-label",children:["Email ",e.jsx("span",{className:"error-text",children:"*"})]}),i?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"email",name:"email",value:s.email,onChange:r,className:"field-input"}),n.email&&e.jsx("p",{className:"error-text",children:n.email})]}):e.jsx("p",{className:"field-value",children:l.email})]}),e.jsxs("div",{className:"info-field",children:[e.jsxs("label",{className:"field-label",children:["CPF ",e.jsx("span",{className:"error-text",children:"*"})]}),i?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"cpf",value:s.cpf,onChange:r,className:"field-input"}),n.cpf&&e.jsx("p",{className:"error-text",children:n.cpf})]}):e.jsx("p",{className:"field-value",children:l.cpf})]}),e.jsxs("div",{className:"info-field",children:[e.jsxs("label",{className:"field-label",children:["Telefone ",e.jsx("span",{className:"error-text",children:"*"})]}),i?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"tel",name:"telefone",value:s.telefone,onChange:r,className:"field-input"}),n.telefone&&e.jsx("p",{className:"error-text",children:n.telefone})]}):e.jsx("p",{className:"field-value",children:l.telefone})]})]}),e.jsxs("h2",{className:"section-title section-title-spacing",children:[e.jsx(P,{className:"section-icon"}),"Informações Opcionais"]}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label-simple",children:"Empresa"}),i?e.jsx("input",{type:"text",name:"empresa",value:s.empresa,onChange:r,className:"field-input"}):e.jsx("p",{className:"field-value",children:l.empresa||"-"})]}),e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label-simple",children:"CNPJ"}),i?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"cnpj",value:s.cnpj,onChange:r,className:"field-input"}),n.cnpj&&e.jsx("p",{className:"error-text",children:n.cnpj})]}):e.jsx("p",{className:"field-value",children:l.cnpj||"-"})]}),e.jsxs("div",{className:"info-field",children:[e.jsx("label",{className:"field-label",children:"Endereço"}),i?e.jsx("input",{type:"text",name:"endereco",value:s.endereco,onChange:r,className:"field-input"}):e.jsx("p",{className:"field-value",children:l.endereco||"-"})]})]}),i&&e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{onClick:C,className:"cancel-button",children:[e.jsx(I,{className:"button-icon"}),"Cancelar"]}),e.jsxs("button",{onClick:y,className:"save-button",children:[e.jsx(O,{className:"button-icon"}),"Salvar Alterações"]})]}),!i&&e.jsxs("div",{className:"profile-header-buttons",children:[e.jsx("button",{onClick:()=>f(!0),className:"edit-button",children:"Editar Perfil"}),e.jsx("button",{onClick:()=>h(!0),className:"delete-account-button",children:"Deletar Conta"})]})]})]})}),v&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal danger",children:[e.jsx("h3",{className:"modal-title",children:"Deletar conta"}),e.jsxs("p",{className:"modal-text",children:["Tem certeza que deseja deletar sua conta?",e.jsx("br",{}),e.jsx("strong",{children:"Essa ação não pode ser desfeita."})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>h(!1),className:"modal-cancel",children:"Cancelar"}),e.jsx("button",{onClick:S,className:"modal-confirm danger",children:"Deletar"})]})]})})]})}export{$ as default};
