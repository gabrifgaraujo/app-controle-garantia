import{r,j as a}from"./index-DW6s9IjZ.js";import{M as j,S as d}from"./sweetalert2.esm.all-3G59N7ia.js";import{f as L,a as S,g as v}from"./index-C8fuLvnH.js";import{I as b,C}from"./index-BNEFYk_0.js";const J=()=>{const[o,c]=r.useState([]),[n,g]=r.useState({nome:"",email:"",avatar:null});r.useEffect(()=>{const e=localStorage.getItem("usuarioLogado");e&&g(JSON.parse(e))},[]),r.useEffect(()=>{const e=localStorage.getItem("usuarioLogado");if(!e)return;const{email:t}=JSON.parse(e),s=`lixeira_${t}`,i=localStorage.getItem(s);i&&c(JSON.parse(i))},[]);const p=e=>{const t=localStorage.getItem("usuarioLogado");if(!t)return;const{email:s}=JSON.parse(t),i=`notas_${s}`,l=`lixeira_${s}`,m=o.find(u=>u.id===e);if(!m)return;const x=JSON.parse(localStorage.getItem(i)||"[]");x.push(m),localStorage.setItem(i,JSON.stringify(x));const f=o.filter(u=>u.id!==e);localStorage.setItem(l,JSON.stringify(f)),c(f);const h=document.body.classList.contains("dark");d.fire({icon:"success",title:"Nota restaurada!",confirmButtonText:"OK",background:h?"#141414":"#ffffff",color:h?"#e5e7eb":"#1f2937",confirmButtonColor:"#7c3aed"})},N=()=>{const e=document.body.classList.contains("dark");d.fire({title:"Limpar lixeira?",text:"Todas as notas serão permanentemente excluídas.",icon:"warning",showCancelButton:!0,confirmButtonText:"Limpar",cancelButtonText:"Cancelar",background:e?"#141414":"#ffffff",color:e?"#e5e7eb":"#1f2937",confirmButtonColor:"#ef4444",cancelButtonColor:e?"#374151":"#9ca3af"}).then(t=>{if(t.isConfirmed){const s=localStorage.getItem("usuarioLogado");if(!s)return;const{email:i}=JSON.parse(s),l=`lixeira_${i}`;localStorage.removeItem(l),c([]),d.fire({icon:"success",title:"Lixeira limpa!",confirmButtonText:"OK",background:e?"#141414":"#ffffff",color:e?"#e5e7eb":"#1f2937",confirmButtonColor:"#7c3aed"})}})};return a.jsx(j,{currentPage:"Lixeira",nome:n.nome,email:n.email,avatar:n.avatar,children:a.jsxs("div",{className:"lixeira-pagina",children:[a.jsxs("header",{className:"lixeira-cabecalho",children:[a.jsxs("div",{className:"cabecalho-texto",children:[a.jsx("h1",{children:"Lixeira"}),a.jsx("p",{children:"Notas fiscais que foram excluídas"})]}),o.length>0&&a.jsxs("button",{className:"btn-limpar-lixeira",onClick:N,children:[a.jsx(L,{}),"Limpar Lixeira"]})]}),a.jsx("div",{className:"lixeira-container",children:o.length===0?a.jsxs("div",{className:"lixeira-vazia",children:[a.jsx("div",{className:"icone-vazio",children:a.jsx(S,{})}),a.jsx("p",{children:"Lixeira vazia"}),a.jsx("span",{children:"Nenhuma nota foi excluída"})]}):o.map(e=>a.jsxs("div",{className:"cartao-nota-lixeira",children:[a.jsxs("section",{className:"cabecalho-nota",children:[a.jsx("div",{className:"cabecalho-topo",children:a.jsx("div",{className:"icone-nota",children:a.jsx(b,{})})}),a.jsxs("article",{className:"info-principal-nota",children:[a.jsx("h2",{className:"titulo-nota",children:e.produto}),a.jsx("p",{className:"sub-nota",children:e.descricao}),a.jsxs("p",{className:"data-garantia",children:[a.jsx(C,{}),e.dataCompra," | Garantia: ",e.duracaoGarantia," ","meses"]})]})]}),a.jsx("div",{className:"acoes-nota-lixeira",children:a.jsxs("button",{className:"btn-restaurar",onClick:()=>p(e.id),children:[a.jsx(v,{}),"Restaurar"]})})]},e.id))})]})})};export{J as default};
