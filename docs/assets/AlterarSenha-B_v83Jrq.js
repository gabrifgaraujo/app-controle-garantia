import{r as t,j as a}from"./index-OKyS6CUG.js";import{M as b}from"./MenuLateral-5eTgk6GH.js";import{S as C}from"./sweetalert2.esm.all-O8mKH-HY.js";function E(){const[i,h]=t.useState(""),[s,d]=t.useState(""),[c,m]=t.useState(""),[f,l]=t.useState(""),[S,n]=t.useState(""),[v,o]=t.useState(""),p=localStorage.getItem("usuarioLogado"),r=p?JSON.parse(p):{nome:"",email:"",senha:""},N=()=>{let e=!0;return i.trim()?i!==r.senha&&(l("Senha atual incorreta."),e=!1):(l("Senha atual é obrigatória."),e=!1),s.trim()?s.length<6&&(n("A nova senha deve ter pelo menos 6 caracteres."),e=!1):(n("Nova senha é obrigatória."),e=!1),c.trim()?s!==c&&(o("As senhas não coincidem."),e=!1):(o("Confirmação da senha é obrigatória."),e=!1),e},g=()=>{if(!N())return;const e={...r,senha:s};localStorage.setItem("usuarioLogado",JSON.stringify(e));const u=JSON.parse(localStorage.getItem("usuarios")||"[]"),x=u.findIndex(j=>j.email===r.email);x!==-1&&(u[x].senha=s,localStorage.setItem("usuarios",JSON.stringify(u))),C.fire({icon:"success",title:"Senha alterada com sucesso!",timer:2e3,showConfirmButton:!1}),h(""),d(""),m(""),l(""),n(""),o("")};return a.jsx(b,{currentPage:"Alterar Senha",nome:r.nome,email:r.email,avatar:r.avatar,children:a.jsx("div",{className:"alterar-senha-container",children:a.jsxs("div",{className:"alterar-senha-card",children:[a.jsx("h2",{className:"alterar-senha-title",children:"Alterar Senha"}),a.jsxs("div",{className:"alterar-senha-grid",children:[a.jsxs("div",{className:"info-field",children:[a.jsx("label",{className:"field-label",children:"Senha Atual"}),a.jsx("input",{type:"password",value:i,onChange:e=>h(e.target.value),onFocus:()=>l(""),className:"field-input",placeholder:"Digite sua senha atual"}),f&&a.jsx("p",{className:"error-text",children:f})]}),a.jsxs("div",{className:"info-field",children:[a.jsx("label",{className:"field-label",children:"Nova Senha"}),a.jsx("input",{type:"password",value:s,onChange:e=>d(e.target.value),onFocus:()=>n(""),className:"field-input",placeholder:"Digite a nova senha"}),S&&a.jsx("p",{className:"error-text",children:S})]}),a.jsxs("div",{className:"info-field",children:[a.jsx("label",{className:"field-label",children:"Confirmar Nova Senha"}),a.jsx("input",{type:"password",value:c,onChange:e=>m(e.target.value),onFocus:()=>o(""),className:"field-input",placeholder:"Confirme a nova senha"}),v&&a.jsx("p",{className:"error-text",children:v})]})]}),a.jsx("div",{className:"action-buttons",children:a.jsx("button",{onClick:g,className:"save-button",children:"Salvar"})})]})})})}export{E as default};
